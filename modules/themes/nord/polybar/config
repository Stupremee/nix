; vim:ft=dosini
; https://github.com/ngynLk/polybar-themes/tree/master/miniblocks

; ----------------------------
; Bars
; ----------------------------

[colors]

background = ${xrdb:color0:#222}
foreground = ${xrdb:color7:#222}
highlight = ${xrdb:color10:#222}
highlight2 = ${xrdb:color11:#222}

[bar/base]
enable-ipc = true
font-0=Hack Nerd Font:pixelsize=10;2
font-1=FontAwesome5Free:style=Solid:pixelsize=8:antialias=true;2

padding = 2
border-size = 0
border-color = ${colors.foreground}

height = 30

background = ${colors.background}
foreground = ${colors.foreground}
override-redirect=false
offset-y = 10

wm-restack = bspwm

[bar/ws]
inherit = bar/base
width = 14.5%


offset-x = 10
line-size = 1

modules-left = bspwm 
scroll-up = bspwm-desknext
scroll-down = bspwm-deskprev

[bar/music]
inherit = bar/base
enable-ipc = true
width = 25%

offset-x = 37.5%

modules-left = previous playpause next 
modules-center = spotify
modules-right = pulseaudio

[bar/tray]
inherit = bar/base
width = 9%

offset-x = 90.5%

modules-left = time

; ----------------------------
; Modules
; ----------------------------

[module/wsnumber]
type = custom/script
exec = bspc query -D -d focused --names
tail = true
interval = 0
format-margin = 2
format = "<label>"
scroll-up = bspc desktop -f next
scroll-down = bspc desktop -f prev

[module/xwindow]
type = internal/xwindow
label = %title:0:33:...%
label-margin = 2

[module/bspwm]
type = internal/bspwm
reverse-scroll = false
pin-workspaces = false

label-focused = %name%
label-focused-underline = ${colors.highlight}
label-focused-foreground = ${colors.highlight}
label-focused-padding = 1

label-occupied = %name%
label-occupied-foreground = ${colors.highlight}
label-occupied-padding = 1

label-empty = %name%
label-empty-padding = 1

[module/time]
type = internal/date
interval = 10
format-margin = 2

time = "%H:%M"
date = "%d %b"

label = %date%, %time%

[module/pulseaudio]
type = internal/pulseaudio

format-volume-margin = 1
format-volume = <ramp-volume> <label-volume>
format-volume-foreground = ${colors.highlight}
label-volume = %percentage:3:3%%
use-ui-max = false
interval = 5

ramp-volume-0 = ""
ramp-volume-1 = ""
ramp-volume-2 = ""


label-muted = "  muted"   
label-muted-padding = 0
label-muted-foreground = ${colors.highlight}

[module/previous]
type = custom/script
exec = echo " "
exec-if = "pgrep spotify"
click-left = "playerctl previous"
label-foreground = ${colors.highlight}

[module/next]
type = custom/script
exec = echo "  "
exec-if = "pgrep spotify"
click-left = "playerctl next"
label-foreground = ${colors.highlight}

[module/playpause]
type = custom/script
exec = spotifystatus
exec-if = "pgrep spotify"
format-padding = 3
tail = true
interval = 0
click-left = "playerctl -p spotify play-pause"
label-foreground = ${colors.highlight}

[module/spotify]
type = custom/script
label = %output:0:25:...%
exec = playerctl -p spotify metadata --format '{{artist}} - {{title}}'
exec-if = "pgrep spotify"
format-padding = 1
tail = true
interval = 1


[settings]
screenchange-reload = true

[global/wm]
margin-top = 0
margin-bottom = 0
